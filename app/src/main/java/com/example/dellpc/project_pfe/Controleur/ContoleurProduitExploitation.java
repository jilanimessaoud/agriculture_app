package com.example.dellpc.project_pfe.Controleur;

import android.content.Context;
import android.view.View;
import android.widget.AdapterView;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.Switch;
import android.widget.Toast;

import com.example.dellpc.project_pfe.Model.Produit;
import com.example.dellpc.project_pfe.Model.ProduitExploitation;
import com.example.dellpc.project_pfe.Model.TypeProduit;
import com.example.dellpc.project_pfe.R;

import java.util.ArrayList;

public class ContoleurProduitExploitation implements View.OnClickListener
{
    Context context ;
    EditText editTextNb ;
    ListView listView ;
    ArrayList<TypeProduit>typeProduits;
    ArrayList<String>listLabels ;
    ArrayList<ProduitExploitation> produitExploitations ;

    int position ;
    public ContoleurProduitExploitation(Context context, EditText editTextNb, ListView listView, ArrayList<TypeProduit>typeProduits, ArrayList<String>listLabels , int position, ArrayList<ProduitExploitation> produitExploitations , Button button) {
        this.context = context;
        this.editTextNb = editTextNb;
        this.listView = listView;
        this.typeProduits=typeProduits;
        this.listLabels=listLabels;
        this.position=position;
        this.produitExploitations=produitExploitations ;
    }

   public void SetviewListe()
    {
        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                String produit = (String) listView.getItemAtPosition(position);
                editTextNb.setHint(produit);

            }
        });

    }
    boolean testInteger()
    {
        try
        {
        Integer.parseInt(editTextNb.getText().toString().trim());
        return true;
        }catch (Exception e)
        {
            return false;
        }

    }
    /**
     * Called when a view has been clicked.
     *
     * @param v The view that was clicked.
     */
    @Override
    public void onClick(View v) {
       ProduitExploitation  produitExploitation ;
        switch (v.getId())
        {
            case R.id.suivListe :
                    {
                        if (editTextNb.getText().toString().trim().length()==0)
                        {
                            editTextNb.setError("Verfier");
                        }
                       else {
                            produitExploitation =new ProduitExploitation();
                            produitExploitation.setCodeExploitation(1);
                            produitExploitation.setCodeProduit(1);
                            produitExploitation.setCodeTypeProduit(typeProduits.get(position).getIdProduit());
                            produitExploitations.add(produitExploitation);
                           listLabels.set(position,listLabels.get(position)+":"+editTextNb.getText().toString().trim());
                          //  Toast.makeText(context.getApplicationContext(),listLabels.get(position),Toast.LENGTH_LONG).show();

                            }
                    }
        }
    }
}
